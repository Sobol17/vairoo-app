# Архитектура проекта AI Note

## Общий подход
- Архитектура построена по принципу *feature-first*: каждая фича изолирована внутри собственного каталога `lib/src/features/<feature_name>`.
- Внутри фичи код разделён на слои `data`, `domain`, `presentation`. Это упрощает поддержку, тестирование и повторное использование.
- Переиспользуемый код и сервисы хранятся в `lib/src/core` и `lib/src/shared`.
- Общая инициализация приложения и DI настроены в `lib/app` и `lib/bootstrap.dart`.

## Структура каталогов
```text
lib/
├── app/
│   └── app.dart                 // точка входа в виджеты + MultiProvider
├── bootstrap.dart               // инициализация зависимостей
├── main.dart                    // запускает bootstrap
└── src/
    ├── core/
    │   ├── network/             // обёртки над Dio, клиенты API
    │   ├── storage/             // обёртки над SharedPreferences и др. хранилищами
    │   └── theme/               // темы, стили
    ├── features/
    │   └── home/
    │       ├── data/            // data sources, models, имплементации репозиториев
    │       ├── domain/          // сущности, интерфейсы репозиториев, use-cases
    │       └── presentation/    // контроллеры/виджеты экрана
    └── shared/                  // общие виджеты, утилиты, расширения (по мере необходимости)
```

## Слои фичи
- **Domain** — контракты (репозитории), сущности (`Equatable`), чистая бизнес-логика.
- **Data** — взаимодействие с API (`Dio`), локальными источниками (`SharedPreferences`), преобразование моделей.
- **Presentation** — UI + менеджмент состояния (`provider`, `ChangeNotifier`/`Controller`).

## Подключённые пакеты
- `dio` — HTTP-клиент с гибкой настройкой и перехватчиками.
- `flutter_svg` — отрисовка SVG (иллюстрации, иконки).
- `shared_preferences` — локальное key-value хранилище.
- `provider` — внедрение зависимостей и управление состоянием.
- `equatable` — упрощённое сравнение сущностей по значениям.

При добавлении новых пакетов фиксируйте их назначение в этом разделе.

## Правила разработки
1. **Новые фичи** создавайте внутри `lib/src/features/<feature_name>` с тремя уровнями (`data/domain/presentation`). Общие элементы выносите в `shared` или `core`.
2. **DI** настраивайте в `App` через `Provider`/`ProxyProvider`. Если зависимость используется глобально, держите её в `core` и прокидывайте из `bootstrap`.
3. **Сетевые запросы** изолируйте в data-layer; используйте обёртки вокруг `Dio` для централизованной настройки логирования, токенов и т.д.
4. **Хранилище** — работайте через абстракции над `SharedPreferences`, чтобы упростить замену и тестирование.
5. **Состояние UI** — отдавайте предпочтение `ChangeNotifier`/`Notifier` внутри фичи. Для более сложных сценариев допускается внедрение других инструментов, но документируйте выбор.
6. **Тесты** — покрывайте ключевые контроллеры и репозитории модульными тестами. Вспомогательные функции выносите в отдельные утилиты.
7. **Именование** — классы `*Controller` для презентационного слоя, `*Repository` для доменного, `*DataSource`/`*Model` для data.
8. **Документация** — обновляйте этот документ при добавлении новых соглашений или пакетов.

## Быстрый старт разработки
1. Установите зависимости: `flutter pub get`.
2. Запустите анализатор: `flutter analyze`.
3. Запуск приложения: `flutter run`.

Следуйте структуре и соглашениям, чтобы поддерживать единообразие и масштабируемость кодовой базы.
